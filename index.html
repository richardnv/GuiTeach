<!DOCTYPE html>
<html>
<head>
    <title>GuiTeach</title>    
    <script src="guitarneck.js" type="text/javascript"></script>
</head>
<body>
	<header>
		<h1>Guitar Neck</h1>
	</header>
    <main>
        <div id="guitar_neck_container">

        </div>    
        <button id="addStringToNeckBtn">Add a String</button>
        <dialog id="addStringDialog">
            <form id="addAStringTuning" method="dialog">
                <label for="stringRootNote">String Root Number:</label>
                <input type="number" id="stringRootNote" name="stringRootNote" min="0" max="127" required>
                <button id="addStringBtn">Add String</button>
            </form>
        </dialog>
        <button id="removeStringFromNeckBtn"onclick="guitarNeckInstance.removeStringFromNeck()">Remove a String</button>
        <button id="toggleAllNotesBtn" onclick="toggleAllNotes()">Hide all Notes</button>
    </main>    
</body>
<script>
    const guitarNeckInstance = new GuitarNeck();

    window.onload = function() {
        guitarNeckInstance.render('guitar_neck_container');             
        guitarNeckInstance.adjustNeckWidth();
    }   
    
    window.onresize = function() {
        guitarNeckInstance.adjustNeckWidth();             
    }

    function toggleAllNotes() {
        if (guitarNeckInstance.AllNotesAreHidden()) {
            guitarNeckInstance.showAllNotes();
            document.getElementById('toggleAllNotesBtn').innerText = 'Hide all Notes';
            return;
        }
        guitarNeckInstance.hideAllNotes();
        document.getElementById('toggleAllNotesBtn').innerText = 'Show all Notes';
    }

    addStringToNeckBtn.addEventListener('click', () => {
        let dialog = document.getElementById('addStringDialog');
        dialog.showModal();
    });

    addStringBtn.addEventListener('click', () => {
        let dialog = document.getElementById('addStringDialog');
        let newStringRootNote = document.getElementById('stringRootNote').value;
        guitarNeckInstance.addStringToNeck(newStringRootNote);
        dialog.close();
    });
    
</script>